name: Update Age in README

on:
  schedule:
    - cron: '0 12 28 * *'  # Executa dia 28 de cada mÃªs Ã s 12:00 UTC
  workflow_dispatch:  # Permite execuÃ§Ã£o manual

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Update Age
        run: |
          python3 << EOF
          from datetime import datetime
          
          def calcular_idade():
              hoje = datetime.now()
              nascimento = datetime(2019, 1, 28)
              idade = hoje.year - nascimento.year
              if (hoje.month, hoje.day) < (nascimento.month, nascimento.day):
                  idade -= 1
              return idade
          
          idade = calcular_idade()
          
          with open('README.md', 'r') as f:
              content = f.read()
          
          # Substitui o placeholder
          content = content.replace('{{XP}}', str(idade))
          
          with open('README.md', 'w') as f:
              f.write(content)
          
          print(f"Idade atualizada para: {idade} anos")
          EOF
      
      - name: Commit changes
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add README.md
          git diff --quiet && git diff --staged --quiet || git commit -m "ðŸŽ‚ Atualiza idade para $(date +%Y)"
          git push